{% extends 'maindashboard/dashboard_base.html' %}
{% comment %} displays Write  {% endcomment %}

{% load static %}

{% block title %} Blog List Page {% endblock title %}
{% block css %}
{{form.media}}
<link rel="stylesheet" href="{% static 'css/blogdashboard/author/write_new_article.css' %}"> 
<style>
    select{
        display: block !important;
        /*border: 1px solid #c9e6ff;*/
      }
      .phone-no{
        display: flex;
        flex-direction: row !important;
        padding-top: 0 !important;
      }
      .phone-no select{
        width: 70px;
        margin-right: 5px;
      }
      select.P-no{
        width: fit-content;
      }
</style>
{% endblock css %}
{% block content %}
 

<!-- Write New Articles -->
<section class="item2 section write-A-page">
  <div class="write-a-c bg--white">
        <div id="w-a-heading">
            <h2> Write New HomePage Information</h2>
        </div>
        <div id="w-a-body">
            <form class="w-a-body" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form.as_p }}
                <div id="phone-no" style="padding-top: 10px;">
                
                    <label for="id_phone_number">Phone number:</label>
                    
                    <p class="phone-no">
                     {{form2.phone_number}}
                    </p>
                    <script>
                      document.addEventListener("DOMContentLoaded", function () {
                          // Get the select element
                          var select = document.getElementById("id_phone_number_0");
              
                          // Initialize a variable to store the previous selected option text
                          var previousOptionText = "";
              
                          // Initialize a variable to store the index of the option currently displaying in the
                          // select. before selecting a new option
                          var currentIndex = -1;
                          // Function to update the previousOptionText and currentIndex variables
                          function updateSelection() {
                              var selectedOption = select.options[select.selectedIndex];
                              var fullText = selectedOption.textContent;
                              // Use a regular expression to extract the country code (last part)
                              var countryCodeMatch = fullText.match(/\+\d+$/);
                              if (countryCodeMatch) {
                                  var countryCode = countryCodeMatch[0];
                                  // Update the text of the selected option to display only the country code
                                  selectedOption.text = countryCode;
                                  //console.log(selectedOption)
                                  previousOptionText = fullText;
                                  currentIndex = select.selectedIndex;
                              }
                          }
              
                          // Initial update
                          updateSelection();
              
                          // Add an event listener for the "change" event on the select element
                          select.addEventListener("change", function () {
                              // Get the selected option text
                              var selectedOptionText = select.options[select.selectedIndex].text;
              
                              // Do something with the selected option text, e.g., save it to a variable
                              //console.log("Selected Option Text:", selectedOptionText);
              
                              // Do something with the previous option text if needed
                              //console.log("Previous Option Text:", previousOptionText);
              
                              // Do something with the current index if needed
                              //console.log("Current Index:", currentIndex);
              
                              // You can also replace the text of the current select option with the saved text
                              select.options[currentIndex].text = previousOptionText;
              
                              // Update the previousOptionText and currentIndex variables
                              updateSelection();
                          });
                      });
                    </script>
                </div>
                <div id="phone-no" style="padding-top: 10px;">
                    <label for="id_whatsapp_number">Whatsapp number:</label>
                    <p class="phone-no">
                     {{form3.whatsapp_number}}
                    </p>
                    <script>
                      document.addEventListener("DOMContentLoaded", function () {
                          // Get the select element
                          var select = document.getElementById("id_whatsapp_number_0");
              
                          // Initialize a variable to store the previous selected option text
                          var previousOptionText = "";
              
                          // Initialize a variable to store the index of the option currently displaying in the
                          // select. before selecting a new option
                          var currentIndex = -1;
                          // Function to update the previousOptionText and currentIndex variables
                          function updateSelection() {
                              var selectedOption = select.options[select.selectedIndex];
                              var fullText = selectedOption.textContent;
                              // Use a regular expression to extract the country code (last part)
                              var countryCodeMatch = fullText.match(/\+\d+$/);
                              if (countryCodeMatch) {
                                  var countryCode = countryCodeMatch[0];
                                  // Update the text of the selected option to display only the country code
                                  selectedOption.text = countryCode;
                                  //console.log(selectedOption)
                                  previousOptionText = fullText;
                                  currentIndex = select.selectedIndex;
                              }
                          }
              
                          // Initial update
                          updateSelection();
              
                          // Add an event listener for the "change" event on the select element
                          select.addEventListener("change", function () {
                              // Get the selected option text
                              var selectedOptionText = select.options[select.selectedIndex].text;
              
                              // Do something with the selected option text, e.g., save it to a variable
                              //console.log("Selected Option Text:", selectedOptionText);
              
                              // Do something with the previous option text if needed
                              //console.log("Previous Option Text:", previousOptionText);
              
                              // Do something with the current index if needed
                              //console.log("Current Index:", currentIndex);
              
                              // You can also replace the text of the current select option with the saved text
                              select.options[currentIndex].text = previousOptionText;
              
                              // Update the previousOptionText and currentIndex variables
                              updateSelection();
                          });
                      });
                    </script>
                </div>
                <div class="button">
                    <button type="submit">Submit</button>
                </div>
            </form> <!-- end of Class w-a-body-->
        </div><!-- end of ID w-a-body-->
    </div><!-- End of Write-articles-->
</section><!-- End Of Write Articles --> 

{% endblock content%}