{% extends 'base.html' %}
{% load static %}

{% block title %}
  Contact Us
{% endblock title %}

{% block css %}
<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
<link rel="stylesheet" href="{% static 'css/contact.css' %}" type="text/css">
<style>
  @import url('https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400');
  select{
    display: block !important;
    border: 1px solid #c9e6ff;
  }
  .phone-no{
    display: flex;
    flex-direction: row !important;
    padding-top: 0 !important;
  }
  .phone-no select{
    width: 70px;
    margin-right: 5px;
  }
  select.P-no{
    width: fit-content;
  }
</style>
{% endblock css %}

{% block content %}
<section class="s2 contact ">
  <div id="contact-page" class="item container">
    <h1 class="brand"><span>Contact Form</span></h1>
    <div class="wrapper animated bounceInLeft ">
      <div class="company-info">
        <h3>
          {{side_info.name}}
          <!-- TEKNICS Technologies -->
        </h3>
        <ul>
          <li>{{side_info.phone_number}}</li>
          <li>{{side_info.email}}</li>
          <li>{{side_info.address}}</li>
        </ul>

        <!-- <div class="social-contact">
              <ul>
                  <li>
                    <a href="#">
                      <i class="fa fa-facebook" aria-hidden="true"></i>
                      <span> - Facebook</span>
                    </a>
                  </li>
                  <li>

                  <li>
                    <a href="#">
                      <i class="fa fa-google-plus" aria-hidden="true"></i>
                      <span> - Google</span>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <i class="fa fa-instagram" aria-hidden="true"></i>
                      <span> - Instagram</span>
                    </a>
                  </li>
            </div> -->
      </div>
      <div class="contact">
        <h3>Email us</h3>
        <form method="post">
          {% csrf_token %}
          <p>
            <label for="id_name">Name</label>
            {{form1.name}}
          </p>
          <p>
            <label for="id_email">Email</label>
            {{form1.email}}
          </p>
          <div id="phone-no">
                
            <label for="id_phone_number">Phone number:</label>
            
            <p class="phone-no">
             {{form2.phone_number}}
            </p>
            <script>
              document.addEventListener("DOMContentLoaded", function () {
                  // Get the select element
                  var select = document.getElementById("id_phone_number_0");
      
                  // Initialize a variable to store the previous selected option text
                  var previousOptionText = "";
      
                  // Initialize a variable to store the index of the option currently displaying in the
                  // select. before selecting a new option
                  var currentIndex = -1;
                  // Function to update the previousOptionText and currentIndex variables
                  function updateSelection() {
                      var selectedOption = select.options[select.selectedIndex];
                      var fullText = selectedOption.textContent;
                      // Use a regular expression to extract the country code (last part)
                      var countryCodeMatch = fullText.match(/\+\d+$/);
                      if (countryCodeMatch) {
                          var countryCode = countryCodeMatch[0];
                          // Update the text of the selected option to display only the country code
                          selectedOption.text = countryCode;
                          //console.log(selectedOption)
                          previousOptionText = fullText;
                          currentIndex = select.selectedIndex;
                      }
                  }
      
                  // Initial update
                  updateSelection();
      
                  // Add an event listener for the "change" event on the select element
                  select.addEventListener("change", function () {
                      // Get the selected option text
                      var selectedOptionText = select.options[select.selectedIndex].text;
      
                      // Do something with the selected option text, e.g., save it to a variable
                      //console.log("Selected Option Text:", selectedOptionText);
      
                      // Do something with the previous option text if needed
                      //console.log("Previous Option Text:", previousOptionText);
      
                      // Do something with the current index if needed
                      //console.log("Current Index:", currentIndex);
      
                      // You can also replace the text of the current select option with the saved text
                      select.options[currentIndex].text = previousOptionText;
      
                      // Update the previousOptionText and currentIndex variables
                      updateSelection();
                  });
              });
            </script>
          </div>
          <p>
            <label for="id_subject">Subject</label>
            {{form3.subject}}
          </p>
          <p class="full">
            <label for="id_message">Message</label>
            {{form3.message}}
          </p>
          <p class="full">
            <button type="submit">Submit</button>
          </p>
        </form>
        <!-- <form method="post">
      {% csrf_token %}
          {{form.as_p}}
          <button type="submit">Submit</button>
      </form> -->
      </div>
    </div>
  </div>

</section>
{% endblock content%}

{% block js %}

{% endblock js %}